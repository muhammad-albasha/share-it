<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Share‑It</title>
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <main class="container">
      <div class="header-section">
        <h1>Share‑It</h1>
      </div>
      
      <p>
        Große Datei hochladen → Link bekommen → selbst per E‑Mail verschicken.
      </p>

      <!-- Zugriffsinformation -->
      <div id="accessInfo" class="access-info">
        {% if access_info %}
        <p class="muted">
          🌐 Deine IP: {{ access_info.client_ip }} 
          {% if access_info.is_internal %}
          <span class="internal">🔒 Intern</span>
          {% else %}
          <span class="external">🌍 Extern</span>
          {% endif %}
        </p>
        {% endif %}
      </div>

      <form id="uploadForm">
        <div id="dropzone" class="dropzone" {% if not access_info.can_upload %}style="display:none;"{% endif %}>
          <input id="fileInput" type="file" name="file" hidden />
          <p>
            <strong>Datei hierher ziehen</strong> oder klicken, um auszuwählen.
          </p>
          <p id="fileName" class="muted"></p>
        </div>

        {% if not access_info.can_upload %}
        <div class="upload-disabled">
          <p><strong>📤 Upload nicht verfügbar</strong></p>
          <p class="muted">Upload ist nur für interne Benutzer (VPN/LAN) verfügbar.<br>
          Du kannst weiterhin alle Download-Links verwenden.</p>
        </div>
        {% endif %}

        <div id="uploadControls" {% if not access_info.can_upload %}style="display:none;"{% endif %}>
          <label for="expires">Ablauf in Tagen (0 = nie):</label>
          <input
            id="expires"
            name="expires_in_days"
            type="number"
            min="0"
            max="{{ max_expire }}"
            value="{{ default_expire }}"
          />

          <button type="submit">Hochladen</button>
        </div>

        <div id="progressWrap" class="progress hidden">
          <div id="progressBar" class="progress-bar"></div>
        </div>

        <p id="status" class="status"></p>

        <div id="result" class="result hidden">
          <label for="link">Download‑Link:</label>
          <div class="copyline">
            <input type="text" id="link" readonly />
            <button id="copyBtn" type="button">Kopieren</button>
          </div>
          <p class="muted" id="expiresNote"></p>
        </div>
      </form>
    </main>

    <script src="/static/app.js"></script>
  </body>
</html>
